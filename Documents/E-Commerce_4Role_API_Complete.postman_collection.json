{
	"info": {
		"_postman_id": "ecommerce-4role-api",
		"name": "E-Commerce 4-Role API - Complete Test Suite",
		"description": "Complete Postman collection to test all CRUD operations for Customer, Cashier, Manager, and Admin roles.\n\n**Setup Instructions:**\n1. Import this collection\n2. Update {{base_url}} in environment (default: http://localhost:5000)\n3. Run requests in order for each role\n4. Tokens are auto-saved to environment variables\n\n**Test Flow:**\n1. Register users (Customer, Cashier, Manager, Admin)\n2. Login and get tokens\n3. Test role-specific operations\n4. Verify permissions work correctly",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Authentication",
			"item": [
				{
					"name": "Register Customer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Response has user and profile\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('user');",
									"    pm.expect(jsonData).to.have.property('profile');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"customer@test.com\",\n  \"username\": \"customer\",\n  \"password\": \"Customer123!\",\n  \"role\": \"customer\",\n  \"first_name\": \"John\",\n  \"last_name\": \"Doe\",\n  \"phone\": \"(555) 123-4567\",\n  \"address_line1\": \"123 Main St\",\n  \"city\": \"New York\",\n  \"state\": \"NY\",\n  \"postal_code\": \"10001\",\n  \"country\": \"USA\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "register"]
						}
					},
					"response": []
				},
				{
					"name": "Register Cashier (by Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"cashier@test.com\",\n  \"username\": \"cashier\",\n  \"password\": \"Cashier123!\",\n  \"role\": \"cashier\",\n  \"employee_id\": \"CASH-001\",\n  \"salary\": 35000\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "register"]
						}
					},
					"response": []
				},
				{
					"name": "Register Manager (by Admin)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"manager@test.com\",\n  \"username\": \"manager\",\n  \"password\": \"Manager123!\",\n  \"role\": \"manager\",\n  \"employee_id\": \"MGR-001\",\n  \"salary\": 60000\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "register"]
						}
					},
					"response": []
				},
				{
					"name": "Register Admin",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@test.com\",\n  \"username\": \"admin\",\n  \"password\": \"Admin123!\",\n  \"role\": \"admin\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "register"]
						}
					},
					"response": []
				},
				{
					"name": "Login Customer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"customer_token\", jsonData.access_token);",
									"pm.environment.set(\"customer_refresh\", jsonData.refresh_token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email_or_username\": \"customer@test.com\",\n  \"password\": \"Customer123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login"]
						}
					},
					"response": []
				},
				{
					"name": "Login Cashier",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"cashier_token\", jsonData.access_token);",
									"pm.environment.set(\"cashier_refresh\", jsonData.refresh_token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email_or_username\": \"cashier@test.com\",\n  \"password\": \"Cashier123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login"]
						}
					},
					"response": []
				},
				{
					"name": "Login Manager",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"manager_token\", jsonData.access_token);",
									"pm.environment.set(\"manager_refresh\", jsonData.refresh_token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email_or_username\": \"manager@test.com\",\n  \"password\": \"Manager123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login"]
						}
					},
					"response": []
				},
				{
					"name": "Login Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"admin_token\", jsonData.access_token);",
									"pm.environment.set(\"admin_refresh\", jsonData.refresh_token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email_or_username\": \"admin@test.com\",\n  \"password\": \"Admin123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login"]
						}
					},
					"response": []
				},
				{
					"name": "Get Current User",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/me",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "me"]
						}
					},
					"response": []
				},
				{
					"name": "Change Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"old_password\": \"Customer123!\",\n  \"new_password\": \"NewPassword123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/change-password",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "change-password"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "2. Categories (Admin)",
			"item": [
				{
					"name": "Create Category - Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.category && jsonData.category.id) {",
									"    pm.environment.set(\"category_id\", jsonData.category.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Electronics\",\n  \"description\": \"Electronic devices and accessories\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/categories",
							"host": ["{{base_url}}"],
							"path": ["api", "categories"]
						}
					},
					"response": []
				},
				{
					"name": "Create Category - Manager (Should Fail)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Books\",\n  \"description\": \"Books and literature\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/categories",
							"host": ["{{base_url}}"],
							"path": ["api", "categories"]
						}
					},
					"response": []
				},
				{
					"name": "Get All Categories - Public",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/categories",
							"host": ["{{base_url}}"],
							"path": ["api", "categories"]
						}
					},
					"response": []
				},
				{
					"name": "Get Category by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/categories/{{category_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "categories", "{{category_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Create Subcategory - Manager",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.category && jsonData.category.id) {",
									"    pm.environment.set(\"subcategory_id\", jsonData.category.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Smartphones\",\n  \"description\": \"Mobile phones and accessories\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/categories/{{category_id}}/subcategory",
							"host": ["{{base_url}}"],
							"path": ["api", "categories", "{{category_id}}", "subcategory"]
						}
					},
					"response": []
				},
				{
					"name": "Update Category - Manager",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"description\": \"Electronic devices, gadgets, and accessories\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/categories/{{category_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "categories", "{{category_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Delete Category - Admin",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/categories/{{subcategory_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "categories", "{{subcategory_id}}"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "3. Products",
			"item": [
				{
					"name": "Create Product - Manager",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.product && jsonData.product.id) {",
									"    pm.environment.set(\"product_id\", jsonData.product.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"iPhone 15 Pro\",\n  \"description\": \"Latest iPhone with A17 Pro chip\",\n  \"price\": 999.99,\n  \"compare_price\": 1099.99,\n  \"sku\": \"IPHONE-15-PRO\",\n  \"barcode\": \"1234567890123\",\n  \"stock_quantity\": 50,\n  \"category_id\": {{category_id}},\n  \"weight\": 0.221,\n  \"is_featured\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/products",
							"host": ["{{base_url}}"],
							"path": ["api", "products"]
						}
					},
					"response": []
				},
				{
					"name": "Create Product - Cashier (Should Fail)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{cashier_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Test Product\",\n  \"price\": 99.99,\n  \"sku\": \"TEST-001\",\n  \"stock_quantity\": 10,\n  \"category_id\": {{category_id}}\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/products",
							"host": ["{{base_url}}"],
							"path": ["api", "products"]
						}
					},
					"response": []
				},
				{
					"name": "Get All Products - Public",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/products?page=1&per_page=20",
							"host": ["{{base_url}}"],
							"path": ["api", "products"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "20"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Product by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/products/{{product_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "{{product_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Search Product by SKU - Staff",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{cashier_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/products/search?sku=IPHONE-15-PRO",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "search"],
							"query": [
								{
									"key": "sku",
									"value": "IPHONE-15-PRO"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Search Product by Barcode - Staff",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{cashier_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/products/search?barcode=1234567890123",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "search"],
							"query": [
								{
									"key": "barcode",
									"value": "1234567890123"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Product - Manager",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"description\": \"Latest iPhone with A17 Pro chip and titanium design\",\n  \"is_featured\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/products/{{product_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "{{product_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Update Price - Manager (Should Fail)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"price\": 899.99\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/products/{{product_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "{{product_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Update Price - Admin",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"price\": 949.99\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/products/{{product_id}}/price",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "{{product_id}}", "price"]
						}
					},
					"response": []
				},
				{
					"name": "Update Stock - Manager",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"quantity_change\": 100,\n  \"operation\": \"set\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/products/{{product_id}}/stock",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "{{product_id}}", "stock"]
						}
					},
					"response": []
				},
				{
					"name": "Check Stock - Staff",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{cashier_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/products/{{product_id}}/stock",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "{{product_id}}", "stock"]
						}
					},
					"response": []
				},
				{
					"name": "Get Low Stock - Manager",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/products/low-stock?threshold=10",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "low-stock"],
							"query": [
								{
									"key": "threshold",
									"value": "10"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Soft Delete Product - Manager",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/products/{{product_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "{{product_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Restore Product - Manager",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/products/{{product_id}}/restore",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "{{product_id}}", "restore"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "4. Cart (Customer)",
			"item": [
				{
					"name": "Get Cart",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/cart",
							"host": ["{{base_url}}"],
							"path": ["api", "cart"]
						}
					},
					"response": []
				},
				{
					"name": "Add to Cart",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"product_id\": {{product_id}},\n  \"quantity\": 2\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/cart/items",
							"host": ["{{base_url}}"],
							"path": ["api", "cart", "items"]
						}
					},
					"response": []
				},
				{
					"name": "Update Cart Item",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"quantity\": 3\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/cart/items/{{product_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "cart", "items", "{{product_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Validate Cart",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/cart/validate",
							"host": ["{{base_url}}"],
							"path": ["api", "cart", "validate"]
						}
					},
					"response": []
				},
				{
					"name": "Remove from Cart",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/cart/items/{{product_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "cart", "items", "{{product_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Clear Cart",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/cart/clear",
							"host": ["{{base_url}}"],
							"path": ["api", "cart", "clear"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "5. Orders",
			"item": [
				{
					"name": "Create Order - Customer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.order && jsonData.order.id) {",
									"    pm.environment.set(\"order_id\", jsonData.order.id);",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// First add item to cart",
									"pm.sendRequest({",
									"    url: pm.environment.get('base_url') + '/api/cart/items',",
									"    method: 'POST',",
									"    header: {",
									"        'Authorization': 'Bearer ' + pm.environment.get('customer_token'),",
									"        'Content-Type': 'application/json'",
									"    },",
									"    body: {",
									"        mode: 'raw',",
									"        raw: JSON.stringify({",
									"            product_id: pm.environment.get('product_id'),",
									"            quantity: 1",
									"        })",
									"    }",
									"}, function(err, res) {",
									"    console.log('Cart item added');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"shipping_address\": {\n    \"line1\": \"123 Main St\",\n    \"line2\": \"Apt 4B\",\n    \"city\": \"New York\",\n    \"state\": \"NY\",\n    \"postal_code\": \"10001\",\n    \"country\": \"USA\"\n  },\n  \"payment_method\": \"credit_card\",\n  \"customer_notes\": \"Please deliver between 9am-5pm\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/orders",
							"host": ["{{base_url}}"],
							"path": ["api", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Get Customer Orders",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/orders?page=1&per_page=20",
							"host": ["{{base_url}}"],
							"path": ["api", "orders"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "20"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Order by ID - Customer",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/orders/{{order_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "{{order_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Get Today's Orders - Staff",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{cashier_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/orders/today",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "today"]
						}
					},
					"response": []
				},
				{
					"name": "Search Order by Number - Staff",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{cashier_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/orders/search?number=ORD-12345",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "search"],
							"query": [
								{
									"key": "number",
									"value": "ORD-12345"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Order Status - Cashier",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{cashier_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"confirmed\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/orders/{{order_id}}/status",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "{{order_id}}", "status"]
						}
					},
					"response": []
				},
				{
					"name": "Update Status to Delivered - Cashier (Should Fail)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{cashier_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"delivered\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/orders/{{order_id}}/status",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "{{order_id}}", "status"]
						}
					},
					"response": []
				},
				{
					"name": "Update Payment Status - Staff",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{cashier_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"payment_status\": \"paid\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/orders/{{order_id}}/payment-status",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "{{order_id}}", "payment-status"]
						}
					},
					"response": []
				},
				{
					"name": "Mark as Shipped - Staff",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{cashier_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tracking_number\": \"TRACK-123456\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/orders/{{order_id}}/ship",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "{{order_id}}", "ship"]
						}
					},
					"response": []
				},
				{
					"name": "Get All Orders - Manager (30 days)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/orders/admin?page=1&per_page=20",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "admin"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "20"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get All Orders - Admin (all time)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/orders/admin?page=1&per_page=20",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "admin"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "20"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Order Notes - Manager",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"notes\": \"Customer called requesting expedited shipping\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/orders/{{order_id}}/notes",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "{{order_id}}", "notes"]
						}
					},
					"response": []
				},
				{
					"name": "Process Refund - Admin",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reason\": \"Customer requested refund - item not as described\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/orders/{{order_id}}/refund",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "{{order_id}}", "refund"]
						}
					},
					"response": []
				},
				{
					"name": "Cancel Order - Customer",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/orders/{{order_id}}/cancel",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "{{order_id}}", "cancel"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "6. User Management (Admin)",
			"item": [
				{
					"name": "Get Own Profile",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/profile",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "profile"]
						}
					},
					"response": []
				},
				{
					"name": "Update Own Profile",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"first_name\": \"John\",\n  \"last_name\": \"Smith\",\n  \"phone\": \"(555) 987-6543\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/profile",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "profile"]
						}
					},
					"response": []
				},
				{
					"name": "Get All Customers - Manager",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/customers?page=1&per_page=20",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "customers"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "20"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get All Users - Admin",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users?page=1&per_page=20&role=customer",
							"host": ["{{base_url}}"],
							"path": ["api", "users"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "20"
								},
								{
									"key": "role",
									"value": "customer"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get User by ID - Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.user && jsonData.user.id) {",
									"    pm.environment.set(\"test_user_id\", jsonData.user.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/1",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "1"]
						}
					},
					"response": []
				},
				{
					"name": "Create User - Admin",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"newmanager@test.com\",\n  \"username\": \"newmanager\",\n  \"password\": \"Manager123!\",\n  \"role\": \"manager\",\n  \"employee_id\": \"MGR-002\",\n  \"salary\": 65000\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users",
							"host": ["{{base_url}}"],
							"path": ["api", "users"]
						}
					},
					"response": []
				},
				{
					"name": "Update User - Admin",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"updated@test.com\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/{{test_user_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "{{test_user_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Change User Role - Admin",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"role\": \"manager\",\n  \"employee_id\": \"MGR-003\",\n  \"salary\": 70000\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/{{test_user_id}}/role",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "{{test_user_id}}", "role"]
						}
					},
					"response": []
				},
				{
					"name": "Ban User - Admin",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"is_active\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/{{test_user_id}}/ban",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "{{test_user_id}}", "ban"]
						}
					},
					"response": []
				},
				{
					"name": "Reset User Password - Admin",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"new_password\": \"TempPassword123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/{{test_user_id}}/reset-password",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "{{test_user_id}}", "reset-password"]
						}
					},
					"response": []
				},
				{
					"name": "Get User Stats - Admin",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/stats",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "stats"]
						}
					},
					"response": []
				},
				{
					"name": "Delete User - Admin",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/{{test_user_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "{{test_user_id}}"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "7. Permission Tests",
			"item": [
				{
					"name": "Customer Creates Product (Should Fail)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 403\", function () {",
									"    pm.response.to.have.status(403);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Unauthorized Product\",\n  \"price\": 99.99,\n  \"sku\": \"UNAUTH-001\",\n  \"stock_quantity\": 10,\n  \"category_id\": 1\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/products",
							"host": ["{{base_url}}"],
							"path": ["api", "products"]
						}
					},
					"response": []
				},
				{
					"name": "Manager Changes Price (Should Fail)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 403\", function () {",
									"    pm.response.to.have.status(403);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"price\": 799.99\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/products/{{product_id}}/price",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "{{product_id}}", "price"]
						}
					},
					"response": []
				},
				{
					"name": "Cashier Processes Refund (Should Fail)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 403\", function () {",
									"    pm.response.to.have.status(403);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{cashier_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reason\": \"Unauthorized refund attempt\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/orders/{{order_id}}/refund",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "{{order_id}}", "refund"]
						}
					},
					"response": []
				},
				{
					"name": "Manager Deletes Category (Should Fail)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 403\", function () {",
									"    pm.response.to.have.status(403);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{manager_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/categories/{{category_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "categories", "{{category_id}}"]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:5000",
			"type": "string"
		},
		{
			"key": "customer_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "cashier_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "manager_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "admin_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "product_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "category_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "order_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "test_user_id",
			"value": "",
			"type": "string"
		}
	]
}
